<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Refit Invoice Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        margin: 0;
        padding: 20px;
    }

    .container {
        max-width: 900px;
        margin: auto;
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(0,0,0,0.15);
    }

    .header {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .header img {
        width: 120px;
        border-radius: 10px;
    }

    h2 {
        margin-top: 0;
    }

    .company-details {
        font-size: 14px;
        line-height: 1.6;
    }

    .controls {
        margin-top: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    button {
        padding: 10px 15px;
        border: none;
        background: #007bff;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
    }

    button:hover {
        background: #0056b3;
    }

    .pastel-block {
        padding: 18px;
        margin: 15px 0;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease-in-out;
    }

    .section-title {
        font-weight: bold;
        margin-bottom: 8px;
        font-size: 1.1rem;
    }

    input, textarea {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border-radius: 6px;
        border: 1px solid #ddd;
    }

    #invoice-output {
        margin-top: 25px;
        padding: 20px;
        background: #fafafa;
        border-radius: 10px;
        border: 2px dashed #ccc;
    }
</style>
</head>

<body>

<div class="container">
    <!-- HEADER -->
    <div class="header">
        <img src="YOUR_LOGO_IMAGE.jpg" alt="Company Logo">
        <div>
            <h2>Refit Maintenance Services</h2>
            <div class="company-details">
                Sole Proprietorship<br>
                Reg No: 201803348973<br>
                C-08-34, Centum @ Oasis Corporate Park,<br>
                Oasis Damansara, No.2 Jalan PJU 1A/2,<br>
                Ara Damansara, 47301 Petaling Jaya,<br>
                Selangor Darul Ehsan, West Malaysia.<br><br>
                Bank: RHB Bank<br>
                Acc No: 2126 1100 0235 58
            </div>
        </div>
    </div>

    <div class="controls">
        <button onclick="setDocType('Quotation')">Create Quotation</button>
        <button onclick="setDocType('Invoice')">Create Invoice</button>
        <button onclick="setDocType('Receipt')">Create Receipt</button>
        <button onclick="setDocType('PO')">Create Purchase Order</button>
        <button onclick="setDocType('DO')">Create Delivery Order</button>
        <button onclick="window.print()">Print / Save PDF</button>
    </div>

    <!-- Pastel Sections -->
    <div class="pastel-block" style="background:#F8D7DA;">
        <div class="section-title">Client Information</div>
        <textarea id="clientInfo" placeholder="Enter client name, address, contact..."></textarea>
    </div>

    <div class="pastel-block" style="background:#D1ECF1;">
        <div class="section-title">Project / Service Description</div>
        <textarea id="description" placeholder="Describe work or service provided..."></textarea>
    </div>

    <div class="pastel-block" style="background:#E2F0CB;">
        <div class="section-title">Itemised Details</div>
        <textarea id="items" placeholder="List items, qty, unit price..."></textarea>
    </div>

    <div class="pastel-block" style="background:#FFF3CD;">
        <div class="section-title">Amount Summary</div>
        <textarea id="amount" placeholder="Subtotal, discount, total amount..."></textarea>
    </div>

    <div class="pastel-block" style="background:#E8DFF5;">
        <div class="section-title">Additional Notes</div>
        <textarea id="notes" placeholder="Payment terms, warranty notes, etc..."></textarea>
    </div>

    <div class="pastel-block" style="background:#D6EAF8;">
        <div class="section-title">Internal Remarks (Optional)</div>
        <textarea id="remarks" placeholder="Internal office-only remarks..."></textarea>
    </div>

    <button onclick="generateInvoice()" style="margin-top:20px;background:#28a745;">Generate Document</button>

    <div id="invoice-output"></div>

</div>

<script>
let docType = "Invoice";
let invoiceCounter = 221;

function setDocType(type) {
    docType = type;
    alert(type + " mode activated.");
}

// AUTO TEXT COLOR BASED ON BACKGROUND
function setContrastText() {
    const blocks = document.querySelectorAll('.pastel-block');

    blocks.forEach(block => {
        const bg = window.getComputedStyle(block).backgroundColor;
        const rgb = bg.match(/\d+/g);
        if (!rgb) return;

        const r = parseInt(rgb[0], 10);
        const g = parseInt(rgb[1], 10);
        const b = parseInt(rgb[2], 10);

        const brightness = ((r * 299) + (g * 587) + (b * 114)) / 1000;

        block.style.color = brightness > 150 ? "#000" : "#FFF";
    });
}

// GENERATE DOCUMENT
function generateInvoice() {
    const today = new Date().toISOString().split('T')[0];
    const ref = "INV-2025-" + invoiceCounter++;

    document.getElementById("invoice-output").innerHTML = `
        <h3>${docType}</h3>
        <p><b>Date:</b> ${today}</p>
        <p><b>Document Ref:</b> ${ref}</p>
        <hr>
        <p><b>Client:</b><br>${document.getElementById("clientInfo").value.replace(/\n/g,"<br>")}</p>
        <p><b>Description:</b><br>${document.getElementById("description").value.replace(/\n/g,"<br>")}</p>
        <p><b>Items:</b><br>${document.getElementById("items").value.replace(/\n/g,"<br>")}</p>
        <p><b>Amount:</b><br>${document.getElementById("amount").value.replace(/\n/g,"<br>")}</p>
        <p><b>Notes:</b><br>${document.getElementById("notes").value.replace(/\n/g,"<br>")}</p>
        <p><b>Remarks:</b><br>${document.getElementById("remarks").value.replace(/\n/g,"<br>")}</p>
    `;
}

// Apply contrast on load
window.onload = setContrastText;
</script>

</body>
</html>
